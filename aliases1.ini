[aliases]
n0=/op /mode # +ooo $$1 $2 $3
n1=/dop /mode # -ooo $$1 $2 $3
n2=/j /join #$$1 $2-
n3=/p /part #
n4=/n /names #$$1
n5=/w /whois $$1
n6=/k /kick # $$1 $2-
n7=/q /query $$1
n8=/send /dcc send $1 $2
n9=/chat /dcc chat $1
n10=/ping /ctcp $$1 ping
n11=/s /server $$1-
n12=
n13=checkSettings {
n14=  %settings = my settings are: 
n15=
n16=  if (%spamBot) {
n17=    %settings = $addtok(%settings, Spam Check, 1)
n18=  }
n19=  if (%botMode) {
n20=    %settings = $addtok(%settings,/Bot Mode, 1)
n21=  }
n22=  if (%japanBot) {
n23=    %settings = $addtok(%settings,/Japanese Mode, 1)
n24=  }
n25=  if (%round) {
n26=    %settings = $addtok(%settings,/21 round in play, 1)
n27=  }
n28=
n29=  msg $chan %settings
n30=}
n31=
n32=japanBot {
n33=  if (%japanBot) {
n34=    unset %japanBot
n35=  }
n36=  else {
n37=    set %japanBot On
n38=  }
n39=}
n40=
n41=spamCheck {
n42=  if (%flooded) { halt }
n43=  if ($($+(%,flood.,$nick),2)) { halt }
n44=  set -u1 %flooded On
n45=  set -u1 %flood. $+ $nick On
n46=}
n47=
n48=botMode {
n49=  if (!%botmode) { halt }
n50=}
n51=
n52=spamBot {
n53=  if (!%spamBot) {  
n54=    echo # Being spammed. Timeout occured.
n55=    halt 
n56=  }
n57=}
n58=
n59=runTimer {
n60=  msg $chan .timer 2 60 I'm just testing, don't mind me <3
n61=}
n62=
n63=stopTimer {
n64=  msg $chan $timer($ltimer) off
n65=}
n66=
n67=playChance {
n68=  var %r = $rand(1,5)
n69=  if ( %r == 3 ) { 
n70=    msg $chan You got 3. Bad luck! $nick is banned for 20 seconds. 
n71=  msg $chan .timeout $nick 20 }
n72=  else { 
n73=  msg $chan You got %r $+ ! What good luck you have, $nick $+ ! }
n74=}
n75=
n76=playSlots {
n77=  echo # playing
n78=  var %one = $rand(1,8)
n79=  var %two = $rand(1,8)
n80=  var %three = $rand(1,8)
n81=
n82=  msg $chan $nick rolled: $readini(faces.ini,$1,%one) $readini(faces.ini,$1,%two) $readini(faces.ini,$1,%three)
n83=
n84=  echo # %one %two %three
n85=
n86=  if (( %one == %two ) && ( %two == %three )) {
n87=
n88=    if ( %one == Kappa ) { msg $chan Oh dear. Bad luck, $nick $+ !
n89=    msg $chan .timeout $nick 60 }
n90=
n91=    if ( %one == AssFace ) { msg $chan What a cutie! }
n92=    if ( ( %one == FrankerZ ) || ( %one == LilZ ) ) { msg $chan I love dogs! }
n93=
n94=    msg $chan CONGRATULATIONS
n95=  }
n96=  else { 
n97=    if (( %one == %two ) || ( %one == %three ) || ( %two == %three )) {
n98=    msg $chan So close! } 
n99=    else { msg $chan Better luck next time! }
n100=  }
n101=}
n102=
n103=reset21 {
n104=
n105=  var %i = 1
n106=  while (%i <= 52) {
n107=    if ($1 != testing) {
n108=      writeini CardDeck.ini %i played false
n109=      inc %i
n110=    }
n111=    else {
n112=      writeini CardDeck.ini %i played true
n113=      inc %i
n114=    }
n115=  }
n116=
n117=  .remove astrious_21.ini
n118=  msg $chan All previous scores have been removed.
n119=}
n120=
n121=start21 {
n122=  reset21
n123=
n124=  if ($1 == testing) {
n125=    writeini astrious_21.ini $nick value $2
n126=    writeini astrious_21.ini $nick stand true
n127=
n128=    msg $chan testing mode started.
n129=
n130=    endRound
n131=  }
n132=  else {
n133=    set %round on
n134=    msg $chan Welcome to a new round of 21. I can explain the rules if you type !21rules. Ready to play? Type !hit or !stand to start. 
n135=  }
n136=}
n137=
n138=hit {
n139=  if (!%round) {
n140=    msg $chan Sorry $nick $+ , no one's started a round yet. Ask a moderator to start one using !start21
n141=  }
n142=  else  {
n143=    var %tries = 0
n144=    var %cardno = $rand(1,52)
n145=    var %goodcard = $readini(CardDeck.ini, %cardno, played)
n146=    echo $nick got: %cardno $+ : $readini(CardDeck.ini, %cardno, played) $+ : $readini(CardDeck.ini, %cardno, name)
n147=
n148=    while (%goodcard != false && %tries < 100) {
n149=      %cardno = $rand(1,52)
n150=      %goodcard = $readini(CardDeck.ini, %cardno, played)
n151=      echo Try: %tries $+ . That card was already used. Instead, $nick got:  %cardno $+ : $readini(CardDeck.ini, %cardno, played) $+ : $readini(CardDeck.ini, %cardno, name)
n152=      inc %tries
n153=    }
n154=
n155=    if (%tries < 100) {
n156=      var %newcard = $readini(CardDeck.ini, %cardno, value)
n157=      writeini CardDeck.ini %cardno played true
n158=
n159=      if ($readini(astrious_21.ini, $nick, stand) != true) {
n160=        var %total = $calc(%newcard + $readini(astrious_21.ini, $nick, value))
n161=
n162=        if (%total < 21) {
n163=          msg $chan $nick rolled: $readini(CardDeck.ini, %cardno, name) $+ . $nick $+ 's new value is %total $+ . Would you like to !hit or !stand?
n164=        }
n165=        else {
n166=          if (%total == 21) {
n167=            msg $chan $nick rolled: $readini(CardDeck.ini, %cardno, name) $+ , giving them a score of 21! Congratulations! Now we'll wait for everyone else to finish...
n168=          } 
n169=          else {
n170=            msg $chan $nick rolled: $readini(CardDeck.ini, %cardno, name) $+ , giving them a total of %total $+ . Sadly, that means they've busted. Now we'll wait for everyone else to finish...
n171=          }
n172=          stand sent
n173=        }
n174=        writeini astrious_21.ini $nick value %total
n175=      }
n176=      else {
n177=        msg $chan You've either won, busted or chosen to stand, $nick $+ . You have to wait for the round to end.
n178=      }
n179=    }
n180=    else {
n181=      msg $chan I'm out of cards! Time to finish the game.
n182=      endRound fulldeck
n183=    }
n184=  }
n185=}
n186=
n187=stand {
n188=  if (!%round) {
n189=    msg $chan Sorry $nick $+ , no one's started a round yet. Ask a moderator to start one using !start21
n190=  }
n191=  else  {
n192=
n193=    writeini astrious_21.ini $nick stand true
n194=
n195=    var %cunt = $ini(astrious_21.ini, 0)
n196=    var %ct = 1
n197=    var %waiting = false
n198=    var %players
n199=
n200=    inc %count
n201=    while (%ct <= %cunt) {
n202=      var %user = $ini(astrious_21.ini, %ct)
n203=      if ($readini(astrious_21.ini, %user, stand) != true) {
n204=        echo # %user is $readini(astrious_21.ini, %user, stand)
n205=        %waiting = true
n206=        %players = $addtok(%players, %user, 32)
n207=      }
n208=      inc %ct
n209=    }
n210=
n211=    if ($1 != sent) {
n212=      echo # Waiting = %waiting
n213=      var %val = $readini(astrious_21.ini, $nick, value)
n214=      if (%waiting == true) {
n215=        msg $chan Okay $nick $+ , you've chosen to stand with a total score of %val $+ . Just waiting on %players
n216=      }
n217=      else {
n218=        msg $chan Okay $nick $+ , you've chosen to stand with a total score of %val $+ . You're the last player, so it's my turn now.
n219=      }
n220=    }
n221=
n222=    if (%waiting == false) {
n223=      endRound
n224=    }
n225=  }
n226=}
n227=
n228=endRound {
n229=  unset %round
n230=
n231=  var %score = 0
n232=  var %cards = My cards were: 
n233=
n234=  while (%score < 17 && $1 != fulldeck) {
n235=    var %cardno = $rand(1,52)
n236=    var %goodcard = $readini(CardDeck.ini, %cardno, played)
n237=    var %tries = 0
n238=    echo Lilly: %cardno $+ : $readini(CardDeck.ini, %cardno, played) $+ : $readini(CardDeck.ini, %cardno, name)
n239=
n240=    while ((%goodcard != false) && (%tries < 20)) {
n241=      echo The card $readini(CardDeck.ini, %cardno, value) is not good.
n242=      %cardno = $rand(1,52)
n243=      %goodcard = $readini(CardDeck.ini, %cardno, played)
n244=      echo The new card is: %cardno $+ : %goodcard
n245=    }
n246=
n247=    echo The card $readini(CardDeck.ini, %cardno, value) is all good.
n248=
n249=    var %newcard = $readini(CardDeck.ini, %cardno, value)
n250=    %score = %score + %newcard
n251=    echo total : %score
n252=    if (%score == %newcard) {
n253=      %cards = $addtok(%cards, $readini(CardDeck.ini, %cardno, name), 1)
n254=    }
n255=    else {
n256=      %cards = $addtok(%cards $+ /, $readini(CardDeck.ini, %cardno, name),1)
n257=    }
n258=  }
n259=
n260=  if ($1 != fulldeck) {
n261=    msg $chan %cards $+ . I'm standing now with a total of %score $+ . Let's see who beat me.
n262=    var %winning = true
n263=
n264=    if (%score > 21) {
n265=      %score = 0
n266=    }
n267=  }
n268=  else {
n269=    %score = 0
n270=  }
n271=  evaluateScores %score
n272=
n273=}
n274=
n275=evaluateScores {
n276=  var %winningScore = $1
n277=  var %winner = MissLillySatou
n278=  var %win = true
n279=
n280=  if (%winningScore == 0) {
n281=    %win = false
n282=  }
n283=
n284=  var %cnt = $ini(astrious_21.ini, 0)
n285=  var %c = 1
n286=  inc %cnt
n287=
n288=  echo # i = %c $+ , count = %cnt
n289=
n290=  while (%c <= %cnt) {
n291=
n292=    var %compare = $readini(astrious_21.ini, $ini(astrious_21.ini,%c), value)
n293=
n294=    echo %compare $+ > %winningScore
n295=    if (%compare > %winningScore) {
n296=      echo # Lilly %winningScore $ini(astrious_21.ini,%c) %compare
n297=      if (%compare <= 22) {
n298=        if (%winner == MissLillySatou) {
n299=          %winner = $ini(astrious_21.ini, %c)
n300=          echo Lilly didn't win.
n301=        }
n302=        else {
n303=          echo %compare $+ : %winningScore
n304=          if (%compare == (%winningScore + 1)) {
n305=            echo is a winner
n306=            %winner = $addtok(%winner $+ /,$ini(astrious_21.ini, %c), 1)
n307=          }
n308=          else {
n309=            echo is THE winner
n310=            %winner = $ini(astrious_21.ini, %c)
n311=          }
n312=        }
n313=
n314=        %winningScore = %compare
n315=        dec %winningScore
n316=      }
n317=    }
n318=    inc %c
n319=  }
n320=
n321=  echo # Winner %winner
n322=
n323=  if (%winner != MissLillySatou) {
n324=    msg $chan The winner is %winner $+ ! Congratulations!
n325=  }
n326=  else {
n327=    if (%win == true) {
n328=      msg $chan I win! Better luck next time <3
n329=    }
n330=    else {
n331=      msg $chan No one won this time... 
n332=    }
n333=  }
n334=}
n335=
n336=guessThatNumber {
n337=  if (%guess) {
n338=    if ($1 == %guessValue) {
n339=      msg $chan You got it, $nick $+ ! Do you want to play again? Type !guessinggame
n340=      unset %guess
n341=    }
n342=    else {
n343=      if ($1 < %guessValue) {
n344=        msg $chan Higher, $nick $+ .
n345=      }
n346=      else {
n347=        msg $chan Lower, $nick $+ .
n348=      }
n349=    }
n350=  }
n351=  else {
n352=    msg $chan Start a new game with !guessinggame, $nick
n353=  }
n354=}
n355=
n356=addCommand {
n357=  write -a newcommands.txt $1
n358=}
