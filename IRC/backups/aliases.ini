[aliases]
n0=/op /mode # +ooo $$1 $2 $3
n1=/dop /mode # -ooo $$1 $2 $3
n2=/j /join #$$1 $2-
n3=/p /part #
n4=/n /names #$$1
n5=/w /whois $$1
n6=/k /kick # $$1 $2-
n7=/q /query $$1
n8=/send /dcc send $1 $2
n9=/chat /dcc chat $1
n10=/ping /ctcp $$1 ping
n11=/s /server $$1-
n12=-l addPoints
n13=
n14=
n15=spamCheck {
n16=  if (%flooded) { halt }
n17=  if ($($+(%,flood.,$nick),2)) { halt }
n18=  set -u3 %flooded On
n19=  set -u5 %flood. $+ $nick On
n20=}
n21=
n22=roundEnded {
n23=  var %temp = 0
n24=  var %i = 1
n25=  var %topic = $+($chan,.,game21)
n26=  var %count $ini(games.ini,%topic,0)
n27=  var %cn, %cv, %win, %closest
n28=  var %21 = false
n29=  var %busted = false
n30=
n31=
n32=  echo # %count
n33=
n34=  while ( %i <= %count ) {
n35=
n36=    %cn = $ini(games.ini,%topic,%i)
n37=
n38=    %cv = $readini(games.ini,%topic,%cn)
n39=
n40=    echo # %cn %cv
n41=
n42=    if ( %cv == 21 ) { 
n43=      %win = $addtok(%win,%cn,32)
n44=    %21 = true } 
n45=    else {
n46=      if (( %cv < 21 ) && ( %21 != true )) {
n47=        if ( %cv  > %temp) {
n48=          %busted = true
n49=          %temp = %cv
n50=          %closest = %cn
n51=        }
n52=      } 
n53=    }
n54=
n55=    inc %i
n56=  }
n57=
n58=  if ( %21 == true ) { msg $chan The winner(s): %win $+ ! Congratulations! } 
n59=  else { 
n60=    if ( %busted == true ) {
n61=      msg $chan The winner is %closest with %temp $+ . Maybe someone will get 21 next time!
n62=    } 
n63=    else { msg $chan Everybody busted. Try again? }
n64=  }
n65=
n66=  /remini games.ini %topic
n67=}
n68=
n69=saveFile {
n70=  writeini -n games.ini $1 $2 $3
n71=}
n72=
n73=play21 {
n74=  var %topic = $+($chan,.,game21)
n75=  var %r = $rand(1,10)
n76=  var %t $calc($readini(games.ini,%topic,$nick) + %r)
n77=  /saveFile %topic $nick %t
n78=
n79=  if ( %t < 21) {
n80=  msg $chan Okay. Let's play. Here's your card: %r $+ . $nick $+ 's total value is $readini(games.ini,%topic,$nick). Type !21 to continue }
n81=  else { 
n82=    if ( %t == 21 ) { msg $chan Your card was a: %r $+ . That means you have %t $+ ! You won! Congratulations $nick $+ ! }
n83=    else { msg $chan Your card was a: %r $+ . You've busted with a total of %t $+ . Bad luck $nick $+ ! }
n84=    if ( !%round ) { /saveFile %topic $nick 0 }
n85=  }
n86=}
n87=
n88=playChance {
n89=  var %r = $rand(1,5)
n90=  if ( $nick isop # ) { 
n91=    msg $chan You can't play this game, $nick $+ . Why not play a different game?
n92=  } 
n93=  else {
n94=    if ( %r == 3 ) { 
n95=      msg $chan You got 3. Bad luck! $nick is banned for 20 seconds. 
n96=    msg $chan .timeout $nick 20 }
n97=    else { 
n98=    msg $chan Wow! You got %r $+ ! What good luck you have, $nick $+ ! }
n99=  }
n100=}
n101=
n102=playSlots {
n103=  echo # playing
n104=  var %one = $rand(1,5)
n105=  var %two = $rand(1,5)
n106=  var %three = $rand(1,5)
n107=
n108=  msg $chan $readini(faces.ini,faces,%one) $readini(faces.ini,faces,%two) $readini(faces.ini,faces,%three) was rolled by $nick
n109=
n110=  echo # %one %two %three
n111=
n112=  if (( %one == %two ) && ( %two == %three )) { msg $chan CONGRATULATIONS } 
n113=  else { 
n114=    if (( %one == %two ) || ( %one == %three ) || ( %two == %three )) {
n115=    msg $chan so close! } 
n116=    else { msg $chan Better luck next time! }
n117=  }
n118=}
n119=
n120=start21Round {
n121=  var %topic = $+($chan,.,game21)
n122=  var %i = 1
n123=  var %count $ini(games.ini,%topic,0)
n124=
n125=  msg $chan New 21 round starting. All players reset. You can end the round by using !endround.
n126=
n127=  /remini games.ini %topic
n128=
n129=  set %round On
n130=}
n131=
n132=reset21 {
n133=  var %topic = $+($chan,.,game21)
n134=  /remini games.ini %topic $nick
n135=}
